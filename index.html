---
layout: default
title: Data.json File Merger
overview: true
---  
  
<script src="https://raw.githubusercontent.com/eligrey/FileSaver.js/master/FileSaver.min.js" type="text/javascript"></script> 
<script type="text/javascript">

    function readfile(f,i) {
        var reader = new FileReader(); 
        reader.readAsText(f); 
        reader.onload = function() { 
            
            var text = reader.result; 
            
            var out = document.getElementById("datafile"+i);  
            out.innerHTML = "";                          
            out.appendChild(document.createTextNode(text));
    
        }
        reader.onerror = function(e) {
            console.log("Error", e);  
        };
    }    

    function addRows()
        {
         $NumberOfRows = document.getElementById("NumberOfRows").value;     
         $NumberOfRows++;
         //alert($NumberOfRows);
         
         $rowHTML = '<tr><td><p><label><strong>' + $NumberOfRows + ') Upload Data.json >></strong></label></p><div class="settingsGroup"><p><input type="file" onchange="readfile(this.files[0],' + $NumberOfRows + ')"></input></p></div></td><td><textarea cols="40" rows="5" id="datafile' + $NumberOfRows + '" style="border: 1px solid #000;"></textarea></td></tr>'; 
         $("#mergefiles").append($rowHTML);
         
         document.getElementById("NumberOfRows").value = $NumberOfRows;
            }

        function mergeFiles()
            {
   
            $mergedArray = new Array();
            $totalCount = 0;
            
            mf = document.getElementsByTagName("textarea");
        $.each(mf, function(index, item) {                
            
             $thisJSON = item.value;
             
             if($thisJSON!='')
                 {                 
                 $thisArray = jQuery.parseJSON($thisJSON);

                 $.each($thisArray, function(index2, item2) {
                   
                    $itemArray = {};
                    for (var key in item2) 
                        {
                        $itemArray[key] = item2[key]; 
                        }
                    //alert(dodump($itemArray));

                    $mergedArray.push($itemArray);
                    $totalCount++;

                 }); 
                 
                }
        });  
        
        //alert(dodump($mergedArray));
        
        $mergedJSON = JSON.stringify($mergedArray);
                       
        var blob = new Blob([$mergedJSON], {type: "application/json;charset=utf-8"});
        saveAs(blob, "data.json");
        
        }
</script>    
  
<h1>Data.json File Merger</h1>

<p>This is a JavaScript tool that merges data.json files. You can add more than two rows by selecting "Add Another File". When ready, hit "Merge Files" and all files will be merged into a single and presented via a text area.</p>
<p>If it doesn't work, or there are features you'd like to add, use the <a href="https://github.com/kinlane/data-json-file-merger/issues">issue manager on the Github repo</a>.</p>
<p align="center"><i>(upload only works in Chrome &amp; firefox, for Internet Explorer  paste in contents of files to textareas)</i></p>
<form id='settingsForm'>
  <table cellpadding="1" cellspoacing="1" width="100%" id="mergefiles">
      <input type="hidden" id="NumberOfRows" value="2" />
      <tr>
          <td>
              <p><label><strong>1) Upload Data.json >></strong></label></p>
              <div class="settingsGroup">
                <p><input type="file" onchange="readfile(this.files[0],1)"></input></p>
              </div>   
          </td>
          <td>
              <textarea cols="40" rows="5" id="datafile1" style="border: 1px solid #000;"></textarea>
          </td>
      </tr>
      <tr>
          <td>
              <p><label><strong>2) Upload Data.json >></strong></label></p>
              <div class="settingsGroup">
                <p><input type="file" onchange="readfile(this.files[0],2)"></input></p>
              </div>   
          </td>
          <td>
              <textarea cols="40" rows="5" id="datafile2" style="border: 1px solid #000;"></textarea>
          </td>
      </tr>                              
  </table>    
</form>  
<table cellpadding="5" cellspacing="5" align="center">
    <tr>
        <td>                      
            <input type="button" name="addRow" value="Add Another File" onclick="addRows(); return false;" style="padding: 5px;" />
        </td>
        <td>
            <input type="button" name="addRow" value="Merge Files" onclick="mergeFiles(); return false;" style="padding: 5px;" />
        </td>
    </tr>
</table>
                        
<hr />
<!-- 3scale -->
<p align="center">
<a href="http://bit.ly/13esk6Q" target="_blank" title="APIs From 3Scale">
    <img src="https://s3.amazonaws.com/kinlane-productions/api-service-providers/3Scale/empowered-by-3scale.png" width="300" style="padding-bottom: 15px;" />
</a>        
</p>  
<hr />